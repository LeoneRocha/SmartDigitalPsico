FROM node:latest
WORKDIR /app
COPY . .
RUN npm install
EXPOSE 4200
CMD ["npm", "start"]

docker build -t my-angular-app .
docker run -it -p 4200:4200 --rm SmartDigitalPsico
docker run --name av-app-multistage-container -d -p 8888:80 av-app-multistage-image
  
  docker builder prune
-----------------------------------------------------------
 ### STAGE 1: Build ###  esponsável por gerar o build da nossa aplicação  
FROM node:14 as node
WORKDIR /app
COPY . .
##COPY package.json package-lock.json ./ 
RUN npm install  --force
RUN npm run build --prod

### ESTÁGIO 2: Executar ###   2 - Responsável por expor nossa aplicação smartdigitalpsico
FROM nginx:latest 
COPY nginx.conf /etc/nginx/nginx.conf
COPY --from=node /app/dist/smartdigitalpsico /usr/share/nginx/html
  
EXPOSE 8081
CMD ["nginx", "-g", "daemon off;"]

https://github.com/angular/angular/issues/18306

-------------
docker build -t smartdigitalpsico .

docker run -it -p 4200:4200 --rm smartdigitalpsico

docker build -t smartdigitalpsico:prod .

-----------------------------------------------------------

docker build -t smartdigitalpsico-image:v1 .

docker run -d --name smartdigitalpsico -p 8081:8081  smartdigitalpsico-image:v1

docker run -d --name smartdigitalpsico -p 4209:4209  smartdigitalpsico-image:v1

-----------------------------------------------------------
 ---- TESTAR GERAR O BULDI PROD E VER SE VAI BUILDAR 



https://www.nginx.com/resources/wiki/start/topics/examples/full/
https://www.google.com/search?q=nginx+configuration+example+angular&rlz=1C1VDKB_pt-PTBR1004BR1004&sxsrf=APwXEdejYBgyk1ZWir_2NPUjdS4rf9IIAg%3A1681948154997&ei=-n1AZJuxPMfI1sQPqeeQ-A0&ved=0ahUKEwiblrySkbf-AhVHpJUCHakzBN8Q4dUDCA8&uact=5&oq=nginx+configuration+example+angular&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIGCAAQFhAeOgoIABBHENYEELADOggIABAWEB4QCkoECEEYAFCAAVjZEWCSFmgBcAF4AIABvAGIAakJkgEDMC44mAEAoAEByAEIwAEB&sclient=gws-wiz-serp


REFERENCIAS
https://dev.to/sharathmohan007/nginx-configuration-for-angular2-deployment-2b94
https://stackoverflow.com/questions/45277183/how-to-config-nginx-to-run-angular4-application

https://gist.github.com/noherczeg/f9293abfe0b78198b68e
https://medium.com/@technicadil_001/deploy-an-angular-app-with-nginx-a79cc1a44b49



 *-*************************
docker run --name smartdigitalpsico-container -d -p 8081:8081 smartdigitalpsico-image
 
https://www.gasparbarancelli.com/post/construindo-imagem-docker-em-projetos-angular-utilizando-o-nginx-como-servidor

https://wkrzywiec.medium.com/build-and-run-angular-application-in-a-docker-container-b65dbbc50be8

https://www.youtube.com/watch?v=m34C6Hz0qF4

https://tiangolo.medium.com/angular-in-docker-with-nginx-supporting-environments-built-with-multi-stage-docker-builds-bb9f1724e984



### STAGE 1: Build ###  esponsável por gerar o build da nossa aplicação
FROM node:18 as node
WORKDIR /app
COPY . .
RUN npm install --force
RUN npm run build --prod

### ESTÁGIO 2: Executar ###   2 - Responsável por expor nossa aplicação
FROM nginx 
COPY --from=node /app/dist/ /usr/share/nginx/html

EXPOSE 4200


# Configuração do Docker


Criar a imagem docker

    docker build -t andrefelix/gerenciador-tarefas:v1 .

Publicar a imagem no DockerHub

    docker push andrefelix/gerenciador-tarefas:v1 

Rodando via Docker 

### Comando Docker 

    docker run -d --name gerenciador-tarefas -p 8099:80 andrefelix/gerenciador-tarefas:v1

### Comando Docker-compose

    docker-compose -f docker/docker-compose.yaml up -d




    docker build -t meu-projeto-angular:prod .
